<!DOCTYPE html>
<html lang="sv">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/main.css">
    <script src="js/main.js" type="module"></script>
    <title>Moment 1 - DT211G Frontend-baserad webbutveckling</title>
</head>

<body>
    <header>
        <nav>
            <ul class="large_nav">
                <li><a href="index.html">Startsida</a></li>
                <li><a href="foton.html">Bilder</a></li>
                <li><a href="process.html">Arbetsprocess</a></li>
            </ul>
        </nav>
        <button class="hamburger">
            <div class="bar"></div>
        </button>
    </header>
    <nav class="mobile_nav">
        <ul class="small_nav">
            <li><a href="index.html">Startsida</a></li>
            <li><a href="foton.html">Bilder</a></li>
            <li><a href="process.html">Arbetsprocess</a></li>
        </ul>
    </nav>
    </header>

    <main class="process-main">
        <h1 class="h1center">Arbetsprocess</h1>

        <div class="flex-container">
        <div class="process-container">

        <h2>Uppstart av NPM-projekt</h2>
        <p>Arbetet inleddes med att skapa en mapp för projektet, därefter skapades ett nytt npm-projekt i mappen genom
            att ange <em>npm init</em> i kommandotolken och följa stegen som följer. En package.json-fil skapades och
            där togs ”main” och
            ”script”-funktionen bort och därefter sparades filen. I nästa steg installerades npm-paketet parcel som en
            dev dependency via terminalen i Visual Studio Code, genom att där ange <em>npm install parcel
                --save-dev</em>. I
            package.json filen lades attributet ”source”: ”src/index.html” och katalogen src skapades i projektet.
            Därefter lades objektet ”scripts”: { ”start”: ”parcel”, ”build”: ”parcel build”} in, för att skapa kommandon
            som kan användas för att starta live server och bygga sidan via kommandotolken. Tanken är att projektet ska
            versionshanteras i Github och för att undvika att node_modules-katalogen som skapas vid installationen av
            parcel versionshanteras skapades en gitignore-fil där node_modules/ lades in. </p><br>
        <p>Därefter inleddes arbetet med att skapa själva demowebbsidan. I src-mappen lades tre html-sidor in som
            representerar respektive undersida på den här webbsidan. Dessutom skapades en mapp för css innehållandes en
            css-fil och en mapp för JavaScript innehållandes en JavaScript-fil. Dessa filer länkades in i HTML-sidorna
            och i taggen för JavaScript-filen angavs attributet type=”module” för att parcel ska kunna optimera filen.
        </p><br>
        <p>För att testköra sida skrivs <em>npm run start</em> in i kommandotolken, då dyker sidan upp live i en lokal
            host så
            alla ändringar som sparas i filerna visas i realtid. En .parcel-cache-katalog och en dist-katalog skapas,
            vilka läggs in i .gitignore-filen. Det är från dist-katalogen som filerna senare kommer att publiceras.</p>

        <h2>Bilder</h2>
        <p>Originalbilderna på sidan är i PNG-format och ligger storleksmässigt på mellan 2 och 10MB, med hjälp av
            parcel och queryparametrar optimerades bilderna till att bättre passa för användning på webben. Såväl
            filformaten som bildbredden ändrades. Se nedan kodstycke: </p>

        <picture class="example">
            <source srcset="bilder/bildoptimering.png?as=avif" type="image/avif">
            <source srcset="bilder/bildoptimering.png?as=webp" type="image/webp">
            <source srcset="bilder/bildoptimering.png?as=jpeg" type="image/jpeg">
            <img src="bilder/bildoptimering.png" alt="Kodexempel för automatiserad bildoptimering">
        </picture>

        <h2>Bakåtkompabilitet</h2>
        <p>För att säkerställa bakåtkompabilitet och transpilering av JavaScript för äldre webbläsare användes nyckeln
            ”browserslist” i package.json-filen på följande vis:</p>

        <picture class="example">
            <source srcset="bilder/browserslist.png?as=avif" type="image/avif">
            <source srcset="bilder/browserslist.png?as=webp" type="image/webp">
            <source srcset="bilder/browserslist.png?as=jpeg" type="image/jpeg">
            <img src="bilder/browserslist.png" alt="Kodexempel för bakåtkompabilitet och transpilering">
        </picture>

        <h2>Versionshantering</h2>
        <p>
            Ett git-repo skapades för projektet och publicerades till GitHub via Visual Studio Codes funktion Source
            Control. För att säkerställa att webbsidan inte uppdateras vid varje push till GitHub skapades två branches,
            en med namnet development och en med namnet main. All utveckling pushas till branchen development, när det
            som utvecklats fungerar som tänkt mergas development branchen ihop med main branchen som är kopplad till
            Netlify (se nedan).
        </p>

        <h2>Publicering</h2>
        <p>Webbsidan publicerades på webbhosten Netlify. För att automatisera publiceringsprocessen importerades
            projektet från GitHub. Som Build Command angavs npm run build, och dist-mappen angavs som Publish Directory.
            Publiceringsprocessen sker nu automatiskt då uppdateringar görs till main-branchen i GitHub. </p>

        <h2>Sammanfattning</h2>
        <p>I och med ovan steg har följande automatiseringar implementerats:</p>
        <ul>
            <li>HTML, CSS och JavaScript minifieras med hjälp av parcel som skapar egna filer av de filer som skapats,
                vilka hamnar i dist-katalogen. </li>
            <li>Bakåtkompabilitet säkerställs och JavaScript transpileras genom att nyckeln ”browserslist” angetts i
                package.json-filen.</li>
            <li>Bilder optimeras med hjälp av parcel och queryparametrar (se bild under rubriken "bilder").</li>
            <li>Arbetsfiler kopieras till dist-katalogen för publicering.</li>
        </ul>
    </div>
</div>
    </main>
    <footer>
        <p>Copyright: Emma Lorensson</p>
    </footer>
</body>

</html>